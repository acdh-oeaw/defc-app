{% extends "defcdb/base.html" %} 
{% block content %}

<h1> Create new Find </h1>
<form action="" method="post">{% csrf_token %}
    <table class="table table-striped">
        {{ form.as_table }}
    </table>
    <input class="btn btn-primary" type="submit" value="Create" />
</form>
{% endblock content %}
{% block scripts %}

<script type="text/javascript">
$(document).ready(function(){
    var fetchedParameter = "{{ request.GET.area }}";
   $("#id_area option").each(function() {
        if($(this).text() == fetchedParameter) {
            $(this).attr('selected', 'selected');
        }                        
    });
});
</script>

<script type="text/javascript">  
// script managing the visibility of Fields-Fields
$(document).ready(function(){
    $('tr:has(th:contains("all finds"))').hide();
        $('tr:has(th:contains("otany"))').hide();
        $('tr:has(th:contains("nimal re"))').hide();
        $('tr:has(th:contains("ithics"))').hide();
        $('tr:has(th:contains("ottery"))').hide();
        $('tr:has(th:contains("Material"))').hide();
})
$('#id_finds_type').change(function(){
    var selected_option =  $("#id_finds_type option:selected").text();
    if(selected_option =="small finds"){
        $('tr:has(th:contains("all finds"))').show("slow");
        $('tr:has(th:contains("otany"))').hide();
        $('tr:has(th:contains("nimal re"))').hide();
        $('tr:has(th:contains("ithics"))').hide();
        $('tr:has(th:contains("ottery"))').hide();
        $('tr:has(th:contains("Material"))').show("slow");
    }
    else if(selected_option =="botany"){
        $('tr:has(th:contains("all finds"))').hide();
        $('tr:has(th:contains("otany"))').show("slow");
        $('tr:has(th:contains("nimal re"))').hide();
        $('tr:has(th:contains("ithics"))').hide();
        $('tr:has(th:contains("ottery"))').hide();
        $('tr:has(th:contains("Material"))').hide();
    }
    else if(selected_option =="animal remains"){
        $('tr:has(th:contains("all finds"))').hide();
        $('tr:has(th:contains("otany"))').hide();
        $('tr:has(th:contains("nimal re"))').show("slow");
        $('tr:has(th:contains("ithics"))').hide();
        $('tr:has(th:contains("ottery"))').hide();
        $('tr:has(th:contains("Material"))').hide();
    }
    else if(selected_option =="lithics"){
        $('tr:has(th:contains("all finds"))').hide();
        $('tr:has(th:contains("otany"))').hide();
        $('tr:has(th:contains("nimal re"))').hide();
        $('tr:has(th:contains("ithics"))').show("slow");
        $('tr:has(th:contains("ottery"))').hide();
        $('tr:has(th:contains("Material"))').show("slow");
    }
     else if(selected_option =="pottery"){
        $('tr:has(th:contains("all finds"))').hide();
        $('tr:has(th:contains("otany"))').hide();
        $('tr:has(th:contains("nimal re"))').hide();
        $('tr:has(th:contains("ithics"))').hide();
        $('tr:has(th:contains("ottery"))').show("slow");
        if($('#id_area option:selected').text() == "---------"){
            $('#id_pottery_form option').hide();
            $('#id_pottery_detail option').hide();
            $('#id_pottery_decoration option').hide();
            //console.log($('#id_area option:selected').text());
        }
        else {
            $('#id_pottery_form option').hide();
            $('#id_pottery_detail option').hide();
            $('#id_pottery_decoration option').hide();
            var selected_area = $('#id_area option:selected').text().substring(0, $('#id_area option:selected').text().indexOf('_'));
            //console.log($('#id_pottery_form option:contains("Southern/Central Greece, Cyclades")'));
            $('#id_pottery_form option:contains('+selected_area+')').show();
           // $('#id_pottery_form ('tr:has(option:contains("Southern and Central Greece, Cyclades"))').show();
            $('#id_pottery_detail option:contains('+selected_area+')').show();
            $('#id_pottery_decoration option:contains('+selected_area+')').show();
        }
        $('tr:has(th:contains("Material"))').hide();
    }
    else if(selected_option =="---------"){
        $('tr:has(th:contains("all finds"))').hide();
        $('tr:has(th:contains("otany"))').hide();
        $('tr:has(th:contains("nimal re"))').hide();
        $('tr:has(th:contains("ithics"))').hide();
        $('tr:has(th:contains("ottery"))').hide();
        $('tr:has(th:contains("Material"))').hide();
    }
});
</script>
<script type="text/javascript">
    $('#id_area').change(function(){
        $('#id_pottery_form option').hide();
        $('#id_pottery_detail option').hide();
        $('#id_pottery_decoration option').hide();
        var selected_area = $('#id_area option:selected').text().substring(0, $('#id_area option:selected').text().indexOf('_'));

        // $('#id_pottery_form option:contains('+selected_area+')').show();
        //    // $('#id_pottery_form ('tr:has(option:contains("Southern and Central Greece, Cyclades"))').show();
        // $('#id_pottery_detail option:contains('+selected_area+')').show();
        // $('#id_pottery_decoration option:contains('+selected_area+')').show();
        if(selected_area = $('#id_area option:selected').text().substring(0, $('#id_area option:selected').text().indexOf('_'))){
                    $('#id_pottery_form option:contains('+selected_area+')').show();
                    $('#id_pottery_detail option:contains('+selected_area+')').show();
                    $('#id_pottery_decoration option:contains('+selected_area+')').show();
            }
    }
    );
</script>

{% endblock scripts %}


