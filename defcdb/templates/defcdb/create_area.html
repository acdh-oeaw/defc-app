{% extends "defcdb/base.html" %} 
{% block content %}

<div class="container">
<h1> Create new Area </h1>
<form action="" method="post">{% csrf_token %}
    <table class="table table-striped">
        {{ form.as_table }}
    </table>
    <input class="btn btn-primary" type="submit" value="Create" />
</form>
{% endblock content %}
{% block scripts %}

<script type="text/javascript">
$(document).ready(function(){
    var fetchedParameter = "{{ request.GET.site }}";
   $("#id_site option").each(function() {
        if($(this).text() == fetchedParameter) {
            $(this).attr('selected', 'selected');
        }                        
    });
});
</script>

<script type="text/javascript">
    $(document).ready(function(){
        $('tr:has(th:contains("Earliest"))').hide();
        $('tr:has(th:contains("Latest"))').hide();
    });
    $('#id_radiocarbon_dated').change(function(){
    var selected_option =  $('#id_radiocarbon_dated option:selected').text();
    if(selected_option =="yes"){
        $('tr:has(th:contains("Earliest"))').show();
        $('tr:has(th:contains("Latest"))').show();
        $('tr:has(th:contains("Earliest date: 14C age calibrated"))').hide();
        $('tr:has(th:contains("Earliest date: Date of calibration"))').hide();
        $('tr:has(th:contains("Latest date: 14C age calibrated"))').hide();
        $('tr:has(th:contains("Latest date: Date of calibration"))').hide();
    }
    else if(selected_option =="no"){
        $('tr:has(th:contains("Earliest"))').hide();
        $('tr:has(th:contains("Latest"))').hide();
    }
    else if(selected_option =="---------"){
        $('tr:has(th:contains("Earliest"))').hide();
        $('tr:has(th:contains("Latest"))').hide();
    }
    });
</script>

<script type ="text/javascript">
    // $(document).ready(function(){
    //     $('tr:has(th:contains("Earliest date: 14C age calibrated"))').hide();
    //     $('tr:has(th:contains("Earliest date: Date of calibration"))').hide();
    // });
    $('#id_earliest_date_calibration').change(function(){
    var selected_option = $('#id_earliest_date_calibration option:selected').text();
    if(selected_option =="no"){
        $('tr:has(th:contains("Earliest date: 14C age calibrated"))').hide();
        $('tr:has(th:contains("Earliest date: Date of calibration"))').hide();
    }
    else if(selected_option =="yes"){
        $('tr:has(th:contains("Earliest date: 14C age calibrated"))').show();
        $('tr:has(th:contains("Earliest date: Date of calibration"))').show();

    }
    else if(selected_option =="---------"){
        $('tr:has(th:contains("Earliest date: 14C age calibrated"))').hide();
        $('tr:has(th:contains("Earliest date: Date of calibration"))').hide();

    }
});
</script> 

<script type ="text/javascript">
    $('#id_latest_date_calibration').change(function(){
    var selected_option = $('#id_latest_date_calibration option:selected').text();
    if(selected_option =="no"){
        $('tr:has(th:contains("Latest date: 14C age calibrated"))').hide();
        $('tr:has(th:contains("Latest date: Date of calibration"))').hide();
    }
    else if(selected_option =="yes"){
        $('tr:has(th:contains("Latest date: 14C age calibrated"))').show();
        $('tr:has(th:contains("Latest date: Date of calibration"))').show();

    }
    else if(selected_option =="---------"){
        $('tr:has(th:contains("Latest date: 14C age calibrated"))').show();
        $('tr:has(th:contains("Latest date: Date of calibration"))').show();

    }
});
</script> 

<script type="text/javascript"> 
// script managing the visibility of Area-Fields
$(document).ready(function(){
    $('tr:has(th:contains("Quarry"))').hide();
        $('tr:has(th:contains("Settlement"))').hide();
        $('tr:has(th:contains("Cave"))').hide();
        $('tr:has(th:contains("Cemetery"))').hide();
        $('tr:has(th:contains("Grave"))').hide();
})
$('#id_area_type').change(function(){
    var selected_option =  $('#id_area_type option:selected').text();
    if(selected_option =="quarry"){
        $('tr:has(th:contains("Quarry"))').show();
        $('tr:has(th:contains("Settlement"))').hide();
        $('tr:has(th:contains("Cave"))').hide();
        $('tr:has(th:contains("Cemetery"))').hide();
        $('tr:has(th:contains("Grave"))').hide();
    }
    else if(selected_option =="settlement"){
        $('tr:has(th:contains("Quarry"))').hide();
        $('tr:has(th:contains("Settlement"))').show("slow");
        $('tr:has(th:contains("Cave"))').hide();
        $('tr:has(th:contains("Cemetery"))').hide();
        $('tr:has(th:contains("Grave"))').show("slow");   // new added!
    }
    else if(selected_option =="cave or rockshelter"){
        $('tr:has(th:contains("Quarry"))').hide();
        $('tr:has(th:contains("Settlement"))').hide();
        $('tr:has(th:contains("Cave"))').show("slow");
        $('tr:has(th:contains("Cemetery"))').hide();
        $('tr:has(th:contains("Grave"))').show("slow");   //new added
    }
    else if(selected_option =="cemetery or grave"){
        $('tr:has(th:contains("Quarry"))').hide();
        $('tr:has(th:contains("Settlement"))').hide();
        $('tr:has(th:contains("Cave"))').hide();
        $('tr:has(th:contains("Cemetery"))').show("slow");
        $('tr:has(th:contains("Grave"))').show("slow"); //new added
    }
     else if(selected_option =="---------"){
        $('tr:has(th:contains("Quarry"))').hide();
        $('tr:has(th:contains("Settlement"))').hide();
        $('tr:has(th:contains("Cave"))').hide();
        $('tr:has(th:contains("Cemetery"))').hide();
        $('tr:has(th:contains("Grave"))').hide(); //new added
    }
});
</script>
    <script>
    $(function() {
    $('#id_pottery_form').resizable();
});
  </script>
</div>
{% endblock scripts %}