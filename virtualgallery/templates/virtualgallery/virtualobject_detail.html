{% extends "defcdb/base.html" %} 
{% load staticfiles %}
{% block Titel %}See Detail{% endblock %}
{% block scriptHeader %}
<!--STYLESHEET-->
<link type="text/css" rel="stylesheet" href="{% static 'virtualgallery/stylesheet/3dhop.css' %}"/>  
<!--SPIDERGL-->
<script type="text/javascript" src="{% static 'virtualgallery/js/spidergl.js' %}"></script>
<!--JQUERY-->
<script type="text/javascript" src="{% static 'virtualgallery/js/jquery.js' %}"></script>
<!--PRESENTER-->
<script type="text/javascript" src="{% static 'virtualgallery/js/presenter.js' %}"></script>
<!--3D MODELS LOADING AND RENDERING-->
<script type="text/javascript" src="{% static 'virtualgallery/js/nexus.js' %}"></script>
<script type="text/javascript" src="{% static 'virtualgallery/js/ply.js' %}"></script>
<!--TRACKBALLS-->
<script type="text/javascript" src="{% static 'virtualgallery/js/trackball_sphere.js' %}"></script>
<script type="text/javascript" src="{% static 'virtualgallery/js/trackball_turntable.js' %}"></script>
<script type="text/javascript" src="{% static 'virtualgallery/js/trackball_turntable_pan.js' %}"></script>
<script type="text/javascript" src="{% static 'virtualgallery/js/trackball_pantilt.js' %}"></script>
<!--UTILITY-->
<script type="text/javascript" src="{% static 'virtualgallery/js/init.js' %}"></script>
{% endblock scriptHeader %}
{% block content %}

<div>
	<h1>Discover the 3<sup>rd</sup> Dimension</h1>
</div>

<div id="3dhop" class="tdhop" onmousedown="if (event.preventDefault) event.preventDefault()">
 <div id="toolbar">
  <img id="home"     title="Home"                  src="{% static 'virtualgallery/skins/dark/home.png' %}"   /><br/>
  <img id="zoomin"   title="Zoom In"               src="{% static 'virtualgallery/skins/dark/zoomin.png' %}" /><br/>
  <img id="zoomout"  title="Zoom Out"              src="{% static 'virtualgallery/skins/dark/zoomout.png' %}"/><br/>
  <img id="light_on" title="Disable Light Control" src="{% static 'virtualgallery/skins/dark/light_on.png' %}" style="position:absolute; visibility:hidden;"/>
  <img id="light"    title="Enable Light Control"  src="{% static 'virtualgallery/skins/dark/light.png' %}"/><br/>
  <img id="full_on"  title="Exit Full Screen"      src="{% static 'virtualgallery/skins/dark/full_on.png' %}" style="position:absolute; visibility:hidden;"/>
  <img id="full"     title="Full Screen"           src="{% static 'virtualgallery/skins/dark/full.png' %}"   />
 </div>
 <!-- <canvas id="draw-canvas" style="background-image: url({% static 'skins/backgrounds/light.jpg' %})"/> -->
 	<canvas id="draw-canvas"/>
</div>
<div class="alert alert-info" style="text-align:center">
	<a href="#" class="close" data-dismiss="alert" aria-label="close">X</a>
	The 3D-Viewer is based on the great work of the <a href="http://vcg.isti.cnr.it/">Visual Computing Lab of ISTI-CNR</a>. For more information see:<br/> <a href="http://dx.doi.org/10.1016/j.cag.2015.07.001"><i>3DHOP: 3D Heritage Online Presenter</i></a>, Marco Potenziani, Marco Callieri, Matteo Dellepiane, Massimiliano Corsini, Federico Ponchio, Roberto Scopigno Computers & Graphics, Volume 52, November 2015, Pages 129-141, ISSN 0097-8493
            
</div>
{% endblock content %}
{% block scripts %}
<script type="text/javascript">
	var presenter = null;
	function setup3dhop() { 
		presenter = new Presenter("draw-canvas");
		//var meshUrl = "{% static 'virtualgallery/models/multires/gargo.nxs' %}";
		var meshUrl = "http://{{ request.get_host }}/media/{{ object.upload_file }}";
		presenter.setScene({
			meshes: {
				"Gargoyle" : { url: meshUrl }
			},
			modelInstances : {
				"Model1" : { mesh : "Gargoyle" } 
			}
		});
	}

	function actionsToolbar(action) {
		if(action=='home') presenter.resetTrackball(); 
		else if(action=='zoomin') presenter.zoomIn();
		else if(action=='zoomout') presenter.zoomOut(); 
		else if(action=='light' || action=='light_on') { presenter.enableLightTrackball(!presenter.isLightTrackballEnabled()); lightSwitch(); } 
		else if(action=='full'  || action=='full_on') fullscreenSwitch(); 
	}

	$(document).ready(function(){
		init3dhop();
		setup3dhop();
		resizeCanvas(800,600);
		moveToolbar(20,20);
	});
</script>

{% endblock scripts %}


